import{_ as O}from"./Header.cca1e452.js";import{_ as V}from"./Plus.0d48322c.js";import{_ as q}from"./Edit.e31c6ac9.js";import{_ as N}from"./Search.0b0b0847.js";import{h as Y,k as I,r as _,i as P,y as D,z as Z,c as f,b as y,a as e,m as k,v as K,n as s,A as Q,B as M,F as G,C as J,l as W,o as m,D as X,t as i,E as ee,q as g,s as S,x as L}from"./entry.bd9ce3f6.js";import"./_plugin-vue_export-helper.c27b6911.js";const te={class:"w-full h-full flex flex-col"},le={class:"w-full flex grow flex-col overflow-auto h-0"},ae={class:"w-full flex"},oe={class:"w-full flex p-1"},se={class:"grow"},ne=e("div",{class:"font-bold"}," Keyword ",-1),re={class:"pl-1"},ie=e("div",{class:"font-bold"}," Sort By ",-1),ue=e("option",{value:""},null,-1),de=e("option",{value:"username"},"Username",-1),ce=e("option",{value:"email"},"Email",-1),_e=e("option",{value:"fullname"},"Fullname",-1),fe=[ue,de,ce,_e],me={class:"pl-1"},pe=e("div",{class:"font-bold"}," Sort Order ",-1),ve=e("option",{value:"asc"},"Asc",-1),he=e("option",{value:"desc"},"Desc",-1),be=[ve,he],ye={class:"flex items-end pl-1"},ge={class:"w-full flex justify-center items-center grow h-0 p-1"},ke={key:0,class:""},we={class:"tacky"},xe=e("thead",null,[e("tr",{class:"sticky top-0 !z-[2]"},[e("th",null,"No."),e("th",{class:"sticky left-0 !z-[2]"},"Username"),e("th",null,"Email"),e("th",null,"Fullname"),e("th",null,"Can Login"),e("th",null,"Created At"),e("th",null,"Creator"),e("th",null,"Updated At"),e("th",null,"Updator")])],-1),$e=["onClick"],Ae={class:"sticky left-0 !z-[1] bold"},Ue={__name:"index",async setup(Ce){let p,w;const{$moment:x}=ee(),n={};n._TimeZoneOffset=new Date().getTimezoneOffset();const $=Y("token"),{data:u}=([p,w]=I(async()=>W(async()=>{g().loading_full=!0;const{data:o,error:t,status:c}=await S("/api/members",{method:"get",headers:{Authorization:`Bearer ${$.value}`,Accept:"application/json"},params:n,retry:0},"$mPYZORjQo5");return g().loading_full=!1,c.value==="error"?(L().trigger(t),[]):o.value.data},"$HbqiA7t9ZL")),p=await p,w(),p),r=_(""),d=_({field:"",by:"desc"}),v=_(-1),a=_({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),T=()=>{n.like="",r.value!=""&&(n.like=`id:%${r.value}%,username:%${r.value}%,email:%${r.value}%,fullname:%${r.value}%,role:%${r.value}%`),n.sort="",d.field&&(n.sort=d.value.field+":"+d.value.by)},h=_(null),A=async()=>{g().loading_full=!0,a.value.may_get_data=!1,n.page=a.value.page,n.page==1&&(u.value=[]);const{data:o,error:t,status:c}=await S("/api/members",{method:"get",headers:{Authorization:`Bearer ${$.value}`,Accept:"application/json"},params:n,retry:0},"$5dFvUCtn0O");if(g().loading_full=!1,a.value.may_get_data=!0,c.value==="error"){L().trigger(t);return}a.value.page==1?(u.value=o.value.data,h.value&&(h.value.scrollTop=0)):a.value.page>1&&(u.value=[...u.value,...o.value.data]),o.value.data.length==0&&(a.value.is_last_record=!0)},z=async()=>{if(!a.value.may_get_data)return;let o=h.value;if(o.scrollLeft!=a.value.scrollLeft){a.value.scrollLeft=o.scrollLeft;return}a.value.is_last_record||!(Math.round(o.scrollTop)+o.clientHeight>=o.scrollHeight-1)||(a.value.page++,await A())},H=()=>{a.value.page=1,a.value.is_last_record=!1,T(),A()},C=P(),U=()=>{C.push({name:"member-form",query:{id:""}})},{display:B}=D();Z(D());const F=()=>{v.value==-1?B({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):C.push({name:"member-form",query:{id:u.value[v.value].id}})};return(o,t)=>{const c=O,R=V,E=q,j=N;return m(),f("div",te,[y(c,{title:"List Member"}),e("div",le,[e("div",ae,[e("button",{type:"button",name:"button",class:"border-black border-solid border-2 p-1 m-1 text-2xl",onClick:t[0]||(t[0]=l=>U())},[y(R)]),e("button",{type:"button",name:"button",class:"border-black border-solid border-2 p-1 m-1 text-2xl",onClick:t[1]||(t[1]=l=>F())},[y(E)])]),e("div",oe,[e("div",se,[ne,k(e("input",{class:"w-full border-black border-solid border-2 p-1",type:"text","onUpdate:modelValue":t[2]||(t[2]=l=>Q(r)?r.value=l:null),name:"search",placeholder:"Keyword"},null,512),[[K,s(r)]])]),e("div",re,[ie,k(e("select",{class:"w-full border-black border-solid border-2 p-1","onUpdate:modelValue":t[3]||(t[3]=l=>s(d).field=l)},fe,512),[[M,s(d).field]])]),e("div",me,[pe,k(e("select",{class:"w-full border-black border-solid border-2 p-1","onUpdate:modelValue":t[4]||(t[4]=l=>s(d).by=l)},be,512),[[M,s(d).by]])]),e("div",ye,[e("button",{class:"w-full border-black border-solid border-2 p-1",type:"button",name:"button",onClick:t[5]||(t[5]=l=>H())},[y(j,{class:"text-2xl"})])])]),e("div",ge,[s(u).length==0?(m(),f("div",ke," Maaf Tidak Ada Record ")):(m(),f("div",{key:1,class:"w-full h-full overflow-auto",role:"sticky",ref_key:"loadRef",ref:h,onScroll:z},[e("table",we,[xe,e("tbody",null,[(m(!0),f(G,null,J(s(u),(l,b)=>(m(),f("tr",{key:b,onClick:De=>v.value=b,class:X(s(v)==b?"active":"")},[e("td",null,i(b+1)+".",1),e("td",Ae,i(l.username),1),e("td",null,i(l.email),1),e("td",null,i(l.fullname),1),e("td",null,i(l.can_login?"Ya":"Tidak"),1),e("td",null,i(s(x)(l.internal_created_at).format("DD-MM-Y HH:mm:ss")),1),e("td",null,i(l.internal_creator.email),1),e("td",null,i(s(x)(l.internal_updated_at).format("DD-MM-Y HH:mm:ss")),1),e("td",null,i(l.internal_updator.email),1)],10,$e))),128))])])],544))])])])}}};export{Ue as default};
