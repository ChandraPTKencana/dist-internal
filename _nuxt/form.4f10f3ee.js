import{_ as ae}from"./HeaderCustom.vue.f97151d9.js";import{_ as re}from"./client-only.e8bce23c.js";import{_ as z}from"./Search.0b0b0847.js";import{_ as ne}from"./Delete.cb6947d2.js";import{_ as Y}from"./HeaderPopup.vue.897d0604.js";import{h as E,r as m,G,m as y,H as J,o as v,c as b,a as e,b as h,A as Z,v as T,n as l,B as F,F as P,C as Q,D as W,t as c,E as X,p as ee,e as te,q as j,s as L,x as R,f as ie,g as ce,i as de,j as ue,k as _e,l as fe,N as pe,w as me}from"./entry.bd9ce3f6.js";import{_ as le}from"./_plugin-vue_export-helper.c27b6911.js";import"./Times.8161b2e5.js";const C=_=>(ee("data-v-a8e54636"),_=_(),te(),_),ve={class:"box-fixed"},be={class:"w-full flex p-1"},he={class:"grow"},we=C(()=>e("div",{class:"font-bold"}," Keyword ",-1)),xe={class:"pl-1"},ye=C(()=>e("div",{class:"font-bold"}," Sort By ",-1)),ge=C(()=>e("option",{value:"created_at"},"Created At",-1)),ke=C(()=>e("option",{value:"email"},"Email",-1)),$e=C(()=>e("option",{value:"fullname"},"Fullname",-1)),Se=[ge,ke,$e],Ce={class:"pl-1"},Me=C(()=>e("div",{class:"font-bold"}," Sort Order ",-1)),Ae=C(()=>e("option",{value:"asc"},"Asc",-1)),De=C(()=>e("option",{value:"desc"},"Desc",-1)),je=[Ae,De],Ue={class:"flex items-end pl-1"},Ve={class:"w-full flex justify-center items-center grow h-0 p-1"},He={key:0,class:""},Oe={class:"tacky"},Te=C(()=>e("thead",null,[e("tr",{class:"sticky top-0 !z-[2]"},[e("th",null,"No."),e("th",null,"Email"),e("th",null,"Fullname"),e("th",null,"Role"),e("th",null,"Tanggal Dibuat"),e("th",null,"Tanggal Diubah")])],-1)),Ne=["onClick"],Ie={class:"bold"},qe={class:"flex",style:{"justify-content":"end",padding:"5px"}},Be={__name:"users",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},excludes:{type:String,required:!1},exclude_lists:{type:Array,required:!1}},setup(_){const w=_,{$moment:M}=X(),H=E("token"),n=m([]),f=m(""),u=m({field:"created_at",by:"desc"}),x=m(-1),s=m({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),t={};t._TimeZoneOffset=new Date().getTimezoneOffset();const A=()=>{t.like="",f.value!=""&&(t.like=`email:%${f.value}%,fullname:%${f.value}%`),t.sort="",u.value.field&&(t.sort=u.value.field+":"+u.value.by)},g=m(null),U=async()=>{j().loading_full=!0,s.value.may_get_data=!1,t.page=s.value.page,t.page==1&&(n.value=[]),t.page>1&&(t.first_row=JSON.stringify(n.value[0]));const{data:i,error:o,status:$}=await L("/api/users",{method:"get",headers:{Authorization:`Bearer ${H.value}`,Accept:"application/json"},params:t,retry:0},"$hpgj4YuTob");if(j().loading_full=!1,s.value.may_get_data=!0,$.value==="error"){R().trigger(o);return}s.value.page==1?(n.value=i.value.data,g.value&&(g.value.scrollTop=0)):s.value.page>1&&(n.value=[...n.value,...i.value.data]),i.value.data.length==0&&(s.value.is_last_record=!0)},N=async()=>{if(!s.value.may_get_data)return;let i=g.value;if(i.scrollLeft!=s.value.scrollLeft){s.value.scrollLeft=i.scrollLeft;return}s.value.is_last_record||!(Math.round(i.scrollTop)+i.clientHeight>=i.scrollHeight-1)||(s.value.page++,await U())},V=()=>{s.value.page=1,s.value.is_last_record=!1,A(),U()},D=()=>{x.value>-1?w.fnSelect(n.value[x.value]):w.fnSelect({id:"",email:"",fullname:""})};return G(()=>w.show,(i,o)=>{i==!0&&V()},{immediate:!0}),(i,o)=>{const $=Y,I=z;return y((v(),b("section",ve,[e("div",null,[h($,{title:"Search And Select Employees",fn:_.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("div",be,[e("div",he,[we,y(e("input",{class:"w-full border-black border-solid border-2 p-1",type:"text","onUpdate:modelValue":o[0]||(o[0]=a=>Z(f)?f.value=a:null),name:"search",placeholder:"Keyword"},null,512),[[T,l(f)]])]),e("div",xe,[ye,y(e("select",{class:"w-full border-black border-solid border-2 p-1","onUpdate:modelValue":o[1]||(o[1]=a=>l(u).field=a)},Se,512),[[F,l(u).field]])]),e("div",Ce,[Me,y(e("select",{class:"w-full border-black border-solid border-2 p-1","onUpdate:modelValue":o[2]||(o[2]=a=>l(u).by=a)},je,512),[[F,l(u).by]])]),e("div",Ue,[e("button",{class:"w-full border-black border-solid border-2 p-1",type:"button",name:"button",onClick:o[3]||(o[3]=a=>V())},[h(I,{class:"text-2xl"})])])]),e("div",Ve,[l(n).length==0?(v(),b("div",He," Maaf Tidak Ada Record ")):(v(),b("div",{key:1,class:"w-full h-full overflow-auto",role:"sticky",ref_key:"loadRef",ref:g,onScroll:N},[e("table",Oe,[Te,e("tbody",null,[(v(!0),b(P,null,Q(l(n),(a,d)=>(v(),b("tr",{key:d,onClick:r=>x.value=d,class:W(l(x)==d?"active":"")},[e("td",null,c(d+1)+".",1),e("td",Ie,c(a.email),1),e("td",null,c(a.fullname),1),e("td",null,c(a.role),1),e("td",null,c(l(M)(a.created_at).format("DD-MM-Y HH:mm:ss")),1),e("td",null,c(l(M)(a.updated_at).format("DD-MM-Y HH:mm:ss")),1)],10,Ne))),128))])])],544))]),e("div",qe,[e("button",{onClick:o[4]||(o[4]=a=>D()),class:"w-36 m-1 bg-blue-600 text-white p-2 rounded-sm"}," Select ")])])],512)),[[J,_.show]])}}},Fe=le(Be,[["__scopeId","data-v-a8e54636"]]);const k=_=>(ee("data-v-99034dba"),_=_(),te(),_),Le={class:"box-fixed"},Re={class:"w-full flex p-1"},ze={class:"grow"},Ee=k(()=>e("div",{class:"font-bold"}," Keyword ",-1)),Pe={class:"pl-1"},Ke=k(()=>e("div",{class:"font-bold"}," Sort By ",-1)),Ye=k(()=>e("option",{value:"created_at"},"Created At",-1)),Ge=k(()=>e("option",{value:"username"},"Username",-1)),Je=k(()=>e("option",{value:"email"},"Email",-1)),Ze=k(()=>e("option",{value:"fullname"},"Fullname",-1)),Qe=[Ye,Ge,Je,Ze],We={class:"pl-1"},Xe=k(()=>e("div",{class:"font-bold"}," Sort Order ",-1)),et=k(()=>e("option",{value:"asc"},"Asc",-1)),tt=k(()=>e("option",{value:"desc"},"Desc",-1)),lt=[et,tt],st={class:"flex items-end pl-1"},ot={class:"w-full flex justify-center items-center grow h-0 p-1"},at={key:0,class:""},rt={class:"tacky"},nt=k(()=>e("thead",null,[e("tr",{class:"sticky top-0 !z-[2]"},[e("th",null,"No."),e("th",null,"Username"),e("th",null,"Email"),e("th",null,"Fullname"),e("th",null,"Tanggal Dibuat"),e("th",null,"Tanggal Diubah")])],-1)),it=["onClick"],ct={class:"bold"},dt={class:"flex",style:{"justify-content":"end",padding:"5px"}},ut={__name:"members",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},excludes:{type:String,required:!1},exclude_lists:{type:Array,required:!1}},setup(_){const w=_,{$moment:M}=X(),H=E("token"),n=m([]),f=m(""),u=m({field:"created_at",by:"desc"}),x=m(-1),s=m({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),t={};t._TimeZoneOffset=new Date().getTimezoneOffset();const A=()=>{t.like="",f.value!=""&&(t.like=`username:%${f.value}%,email:%${f.value}%,fullname:%${f.value}%`),t.sort="",u.value.field&&(t.sort=u.value.field+":"+u.value.by)},g=m(null),U=async()=>{j().loading_full=!0,s.value.may_get_data=!1,t.page=s.value.page,t.page==1&&(n.value=[]),t.page>1&&(t.first_row=JSON.stringify(n.value[0]));const{data:i,error:o,status:$}=await L("/api/members",{method:"get",headers:{Authorization:`Bearer ${H.value}`,Accept:"application/json"},params:t,retry:0},"$kvzPLjlvci");if(j().loading_full=!1,s.value.may_get_data=!0,$.value==="error"){R().trigger(o);return}s.value.page==1?(n.value=i.value.data,g.value&&(g.value.scrollTop=0)):s.value.page>1&&(n.value=[...n.value,...i.value.data]),i.value.data.length==0&&(s.value.is_last_record=!0)},N=async()=>{if(!s.value.may_get_data)return;let i=g.value;if(i.scrollLeft!=s.value.scrollLeft){s.value.scrollLeft=i.scrollLeft;return}s.value.is_last_record||!(Math.round(i.scrollTop)+i.clientHeight>=i.scrollHeight-1)||(s.value.page++,await U())},V=()=>{s.value.page=1,s.value.is_last_record=!1,A(),U()},D=()=>{x.value>-1?w.fnSelect(n.value[x.value]):w.fnSelect({id:"",username:"",email:"",fullname:""})};return G(()=>w.show,(i,o)=>{i==!0&&V()},{immediate:!0}),(i,o)=>{const $=Y,I=z;return y((v(),b("section",Le,[e("div",null,[h($,{title:"Search And Select Members",fn:_.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("div",Re,[e("div",ze,[Ee,y(e("input",{class:"w-full border-black border-solid border-2 p-1",type:"text","onUpdate:modelValue":o[0]||(o[0]=a=>Z(f)?f.value=a:null),name:"search",placeholder:"Keyword"},null,512),[[T,l(f)]])]),e("div",Pe,[Ke,y(e("select",{class:"w-full border-black border-solid border-2 p-1","onUpdate:modelValue":o[1]||(o[1]=a=>l(u).field=a)},Qe,512),[[F,l(u).field]])]),e("div",We,[Xe,y(e("select",{class:"w-full border-black border-solid border-2 p-1","onUpdate:modelValue":o[2]||(o[2]=a=>l(u).by=a)},lt,512),[[F,l(u).by]])]),e("div",st,[e("button",{class:"w-full border-black border-solid border-2 p-1",type:"button",name:"button",onClick:o[3]||(o[3]=a=>V())},[h(I,{class:"text-2xl"})])])]),e("div",ot,[l(n).length==0?(v(),b("div",at," Maaf Tidak Ada Record ")):(v(),b("div",{key:1,class:"w-full h-full overflow-auto",role:"sticky",ref_key:"loadRef",ref:g,onScroll:N},[e("table",rt,[nt,e("tbody",null,[(v(!0),b(P,null,Q(l(n),(a,d)=>(v(),b("tr",{key:d,onClick:r=>x.value=d,class:W(l(x)==d?"active":"")},[e("td",null,c(d+1)+".",1),e("td",ct,c(a.username),1),e("td",null,c(a.email),1),e("td",null,c(a.fullname),1),e("td",null,c(l(M)(a.internal_created_at).format("DD-MM-Y HH:mm:ss")),1),e("td",null,c(l(M)(a.internal_updated_at).format("DD-MM-Y HH:mm:ss")),1)],10,it))),128))])])],544))]),e("div",dt,[e("button",{onClick:o[4]||(o[4]=a=>D()),class:"w-36 m-1 bg-blue-600 text-white p-2 rounded-sm"}," Select ")])])],512)),[[J,_.show]])}}},_t=le(ut,[["__scopeId","data-v-99034dba"]]),ft={class:"w-full h-full flex flex-col"},pt={class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},mt={class:"w-full align-items-center justify-content-center grow overflow-auto"},vt={class:"w-full flex flex-col flex-wrap p-1"},bt=e("label",{for:""},"Name",-1),ht={class:"text-red-500"},wt={class:"w-full flex flex-col flex-wrap p-1"},xt=e("label",{for:""},"Address",-1),yt={class:"text-red-500"},gt={class:"w-full flex flex-col flex-wrap p-1"},kt=e("label",{for:""},"Contact Number",-1),$t={class:"text-red-500"},St={class:"w-full flex flex-col flex-wrap p-1"},Ct=e("label",{for:""},"Contact Person",-1),Mt={class:"text-red-500"},At={class:"w-full flex flex-col flex-wrap p-1"},Dt=e("label",{for:""},"Active Until",-1),jt={class:"text-red-500"},Ut={class:"w-full flex flex-col flex-wrap p-1"},Vt=e("label",{for:""},"Marketer",-1),Ht={class:"w-full flex flex-row flex-wrap border-black border-solid border-2"},Ot={key:0,class:"w-full flex"},Tt=e("div",{class:"flex items-center grow p-1"}," Pilih Karyawan ",-1),Nt={key:1,class:"w-full flex",style:{}},It={class:"flex flex-row flex-wrap grow"},qt={class:"p-1"},Bt=e("div",{class:"text-sm text-gray-600"},"ID",-1),Ft={class:"bold"},Lt={class:"p-1"},Rt=e("div",{class:"text-sm text-gray-600"},"Email",-1),zt={class:"bold"},Et={class:"text-red-500"},Pt={class:"w-full flex flex-col flex-wrap p-1"},Kt=e("label",{for:""},"Operator",-1),Yt={class:"w-full flex flex-row flex-wrap border-black border-solid border-2"},Gt={key:0,class:"w-full flex"},Jt=e("div",{class:"flex items-center grow p-1"}," Pilih Member ",-1),Zt={key:1,class:"w-full flex",style:{}},Qt={class:"flex flex-row flex-wrap grow"},Wt={class:"p-1"},Xt=e("div",{class:"text-sm text-gray-600"},"ID",-1),el={class:"bold"},tl={class:"p-1"},ll=e("div",{class:"text-sm text-gray-600"},"Username",-1),sl={class:"bold"},ol={class:"text-red-500"},al={class:"w-full flex items-center justify-end"},pl=ie({__name:"form",async setup(_){let w,M;ce();const H=E("token"),n=m({}),f=de(),u=ue();let x={id:"",email:"",fullname:""},s={id:"",username:"",email:"",fullname:""};const{data:t}=([w,M]=_e(async()=>fe(async()=>{const d=u.query.id;if(d!==void 0&&d!==""){j().loading_full=!0;const{data:r,error:O,status:q}=await L("/api/institute",{method:"get",headers:{Authorization:`Bearer ${H.value}`,Accept:"application/json"},params:{id:d},retry:0},"$bPPeSMnGJh");if(j().loading_full=!1,q.value==="error")R().trigger(O,n);else{let S=r.value.data;return S.members.length>0?S.operator_member=S.members[0]:S.operator_member={...s},S}}return{id:-1,email:"",fullname:"",password:"",role:"Institute",can_login:"0",internal_marketer:{...x},operator_member:{...s}}},"$B1N4oerOMC")),w=await w,M(),w);let A=m(!1);const g=()=>{t.value.internal_marketer={...x}},U=()=>{A.value=!0},N=()=>{A.value=!1},V=d=>{t.value.internal_marketer=d,A.value=!1};let D=m(!1);const i=()=>{t.value.operator_member={...s}},o=()=>{D.value=!0},$=()=>{D.value=!1},I=d=>{t.value.operator_member=d,D.value=!1},a=async()=>{j().loading_full=!0,n.value={};let d={name:t.value.name,address:t.value.address,contact_number:t.value.contact_number,contact_person:t.value.contact_person,internal_marketer_id:t.value.internal_marketer.id,operator_member_id:t.value.operator_member.id},r="post",O=u.query.id;O===""||(r="put",d.id=O);const{data:q,error:S,status:B}=await L("/api/institute",{method:r,headers:{Authorization:`Bearer ${H.value}`,Accept:"application/json"},body:d,retry:0},"$f2eU0ZMMSG");if(j().loading_full=!1,B.value==="error"){R().trigger(S,n);return}f.go(-1)};return(d,r)=>{const O=ae,q=pe("vue-date-picker"),S=re,B=z,K=ne,se=Fe,oe=_t;return v(),b(P,null,[e("div",ft,[h(O,{title:"Form Institute",back:!0}),e("div",pt,[e("div",mt,[e("div",vt,[bt,y(e("input",{class:"w-full border-black border-solid border-2 p-1",type:"text","onUpdate:modelValue":r[0]||(r[0]=p=>l(t).name=p)},null,512),[[T,l(t).name]]),e("p",ht,c(l(n).name),1)]),e("div",wt,[xt,y(e("textarea",{class:"w-full border-black border-solid border-2 p-1","onUpdate:modelValue":r[1]||(r[1]=p=>l(t).address=p)},null,512),[[T,l(t).address]]),e("p",yt,c(l(n).address),1)]),e("div",gt,[kt,y(e("input",{class:"w-full border-black border-solid border-2 p-1",type:"text","onUpdate:modelValue":r[2]||(r[2]=p=>l(t).contact_number=p)},null,512),[[T,l(t).contact_number]]),e("p",$t,c(l(n).contact_number),1)]),e("div",St,[Ct,y(e("input",{class:"w-full border-black border-solid border-2 p-1",type:"text","onUpdate:modelValue":r[3]||(r[3]=p=>l(t).contact_person=p)},null,512),[[T,l(t).contact_person]]),e("p",Mt,c(l(n).contact_person),1)]),e("div",At,[Dt,h(S,null,{default:me(()=>[h(q,{class:"border-black border-solid border-2",modelValue:l(t).active_until,"onUpdate:modelValue":r[4]||(r[4]=p=>l(t).active_until=p),"text-input":"","teleport-center":""},null,8,["modelValue"])]),_:1}),e("p",jt,c(l(n).active_until),1)]),e("div",Ut,[Vt,e("div",Ht,[!l(t).internal_marketer||!l(t).internal_marketer.id?(v(),b("div",Ot,[e("button",{onClick:r[5]||(r[5]=p=>U()),class:"flex items-center grow"},[h(B,{class:"text-2xl text-black"}),Tt])])):(v(),b("div",Nt,[e("div",It,[e("div",qt,[Bt,e("div",Ft,c(l(t).internal_marketer.id),1)]),e("div",Lt,[Rt,e("div",zt,c(l(t).internal_marketer.email),1)])]),e("button",{class:"w-10 bg-red-600 flex items-center justify-center",onClick:r[6]||(r[6]=p=>g())},[h(K,{class:"text-2xl text-white"})])]))]),e("p",Et,c(l(n).internal_marketer_id),1)]),e("div",Pt,[Kt,e("div",Yt,[!l(t).operator_member||l(t).operator_member.id==""?(v(),b("div",Gt,[e("button",{onClick:r[7]||(r[7]=p=>o()),class:"flex items-center grow"},[h(B,{class:"text-2xl text-black"}),Jt])])):(v(),b("div",Zt,[e("div",Qt,[e("div",Wt,[Xt,e("div",el,c(l(t).operator_member.id),1)]),e("div",tl,[ll,e("div",sl,c(l(t).operator_member.username),1)])]),e("button",{class:"w-10 bg-red-600 flex items-center justify-center",onClick:r[8]||(r[8]=p=>i())},[h(K,{class:"text-2xl text-white"})])]))]),e("p",ol,c(l(n).operator_member_id),1)])]),e("div",al,[e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:r[9]||(r[9]=p=>d.$router.go(-1))}," Cancel "),e("button",{type:"button",name:"button",class:"w-36 m-1 bg-blue-600 text-white p-2 rounded-sm",onClick:r[10]||(r[10]=p=>a())}," Save ")])])]),h(se,{show:l(A),fnClose:N,fnSelect:V,excludes:"institute_had_which_institute_id"},null,8,["show"]),h(oe,{show:l(D),fnClose:$,fnSelect:I},null,8,["show"])],64)}}});export{pl as default};
