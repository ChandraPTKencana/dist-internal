import{_ as N}from"./Header.e77919cc.js";import{_ as O}from"./Plus.504fbfc0.js";import{_ as P}from"./Edit.5f9dc4b0.js";import{_ as Y}from"./Search.32a029a6.js";import{h as K,k as Z,r as p,i as J,x as L,y as Q,c as m,b as v,a as e,m as D,v as G,n as a,z as W,A as F,F as X,B as ee,l as te,o as h,C as le,t as _,p as se,e as oe,D as ae,q as x,s as H,O as re}from"./entry.329d3af5.js";import{u as ne}from"./useUtils.70251168.js";import{u as ie}from"./useMyFetch.05845d3c.js";import{_ as ue}from"./_plugin-vue_export-helper.c27b6911.js";const n=b=>(se("data-v-6191401c"),b=b(),oe(),b),de={class:"w-full h-full flex flex-col"},ce={class:"w-full flex grow flex-col overflow-auto h-0"},_e={class:"w-full flex"},fe={class:"w-full flex p-1"},pe={class:"grow"},me=n(()=>e("div",{class:"font-bold"}," Keyword ",-1)),ve={class:"pl-1"},he=n(()=>e("div",{class:"font-bold"}," Sort By ",-1)),be=n(()=>e("option",{value:""},null,-1)),ye=n(()=>e("option",{value:"email"},"Email",-1)),ge=n(()=>e("option",{value:"fullname"},"Fullname",-1)),ke=[be,ye,ge],xe={class:"pl-1"},we=n(()=>e("div",{class:"font-bold"}," Sort Order ",-1)),De=n(()=>e("option",{value:"asc"},"Asc",-1)),Se=n(()=>e("option",{value:"desc"},"Desc",-1)),$e=[De,Se],Ae={class:"flex items-end pl-1"},Ce={class:"w-full flex justify-center items-center grow h-0 p-1"},Te={key:0,class:""},Me={class:"tacky"},Le=n(()=>e("thead",null,[e("tr",{class:"sticky top-0 !z-[2]"},[e("th",null,"No."),e("th",null,"Email"),e("th",null,"Fullname"),e("th",null,"Role"),e("th",null,"Tanggal Dibuat"),e("th",null,"Tanggal Diubah")])],-1)),Fe=["onClick"],He={class:"bold"},Ie={__name:"index",async setup(b){let y,S;const{$moment:$}=ae(),{sayHello:I}=ne();I();const r={};r._TimeZoneOffset=new Date().getTimezoneOffset();const A=K("token"),{data:i}=([y,S]=Z(async()=>te(async()=>{x().loading_full=!0;const{data:o,error:t,status:f}=await ie("/api/users",{method:"get",headers:{Authorization:`Bearer ${A.value}`,Accept:"application/json"},params:r,retry:0});return x().loading_full=!1,f.value==="error"?(H().trigger(t),[]):o.value.data},"$4SJ9UL5Y8i")),y=await y,S(),y),u=p(""),d=p({field:"",by:"desc"}),c=p(-1),s=p({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),B=()=>{r.like="",u.value!=""&&(r.like=`id:%${u.value}%,email:%${u.value}%,fullname:%${u.value}%`),r.sort="",d.value.field&&(r.sort=d.value.field+":"+d.value.by)},g=p(null),C=async()=>{x().loading_full=!0,s.value.may_get_data=!1,r.page=s.value.page,r.page==1&&(i.value=[]);const{data:o,error:t,status:f}=await re("/api/users",{method:"get",headers:{Authorization:`Bearer ${A.value}`,Accept:"application/json"},params:r,retry:0},"$LZQttUfkIg");if(x().loading_full=!1,s.value.may_get_data=!0,f.value==="error"){H().trigger(t);return}s.value.page==1?(i.value=o.value.data,g.value&&(g.value.scrollTop=0)):s.value.page>1&&(i.value=[...i.value,...o.value.data]),o.value.data.length==0&&(s.value.is_last_record=!0)},R=async()=>{if(!s.value.may_get_data)return;let o=g.value;if(o.scrollLeft!=s.value.scrollLeft){s.value.scrollLeft=o.scrollLeft;return}s.value.is_last_record||!(Math.round(o.scrollTop)+o.clientHeight>=o.scrollHeight-1)||(s.value.page++,await C())},U=()=>{s.value.page=1,s.value.is_last_record=!1,B(),C()},w=J(),z=()=>{w.push({name:"user-form",query:{id:""}})},{display:T}=L();Q(L());const E=()=>{c.value==-1?T({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):w.push({name:"user-form",query:{id:i.value[c.value].id}})},V=()=>{c.value==-1?T({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):w.push({name:"user-permission",query:{id:i.value[c.value].id}})};return(o,t)=>{const f=N,j=O,M=P,q=Y;return h(),m("div",de,[v(f,{title:"List User"}),e("div",ce,[e("div",_e,[e("button",{type:"button",name:"button",class:"border-black border-solid border-2 p-1 m-1 text-2xl",onClick:t[0]||(t[0]=l=>z())},[v(j)]),e("button",{type:"button",name:"button",class:"border-black border-solid border-2 p-1 m-1 text-2xl",onClick:t[1]||(t[1]=l=>E())},[v(M)]),e("button",{type:"button",name:"button",class:"border-black border-solid border-2 p-1 m-1 text-2xl",onClick:t[2]||(t[2]=l=>V())},[v(M)])]),e("div",fe,[e("div",pe,[me,D(e("input",{class:"w-full border-black border-solid border-2 p-1",type:"text","onUpdate:modelValue":t[3]||(t[3]=l=>W(u)?u.value=l:null),name:"search",placeholder:"Keyword"},null,512),[[G,a(u)]])]),e("div",ve,[he,D(e("select",{class:"w-full border-black border-solid border-2 p-1","onUpdate:modelValue":t[4]||(t[4]=l=>a(d).field=l)},ke,512),[[F,a(d).field]])]),e("div",xe,[we,D(e("select",{class:"w-full border-black border-solid border-2 p-1","onUpdate:modelValue":t[5]||(t[5]=l=>a(d).by=l)},$e,512),[[F,a(d).by]])]),e("div",Ae,[e("button",{class:"w-full border-black border-solid border-2 p-1",type:"button",name:"button",onClick:t[6]||(t[6]=l=>U())},[v(q,{class:"text-2xl"})])])]),e("div",Ce,[a(i).length==0?(h(),m("div",Te," Maaf Tidak Ada Record ")):(h(),m("div",{key:1,class:"w-full h-full overflow-auto",role:"sticky",ref_key:"loadRef",ref:g,onScroll:R},[e("table",Me,[Le,e("tbody",null,[(h(!0),m(X,null,ee(a(i),(l,k)=>(h(),m("tr",{key:k,onClick:Be=>c.value=k,class:le(a(c)==k?"active":"")},[e("td",null,_(k+1)+".",1),e("td",He,_(l.email),1),e("td",null,_(l.fullname),1),e("td",null,_(l.role),1),e("td",null,_(a($)(l.internal_created_at).format("DD-MM-Y HH:mm:ss")),1),e("td",null,_(a($)(l.internal_updated_at).format("DD-MM-Y HH:mm:ss")),1)],10,Fe))),128))])])],544))])])])}}},Oe=ue(Ie,[["__scopeId","data-v-6191401c"]]);export{Oe as default};
