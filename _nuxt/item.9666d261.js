import{_ as q}from"./HeaderPopup.vue.01948059.js";import{_ as P}from"./InputPointFormat.vue.c8d291ec.js";import M from"./Search.dc4ae93e.js";import z from"./Delete.39c4d9bf.js";import E from"./units.994ef275.js";import{r as h,g as T,i as H,f as J,o as b,c as y,k as g,J as O,a as e,b as p,l,A as U,t as _,C as G,F as K,x as v,y as $,p as L,e as Q}from"./entry.622940e4.js";import"./useUtils.3d22bd33.js";import{u as N}from"./useMyFetch.83f6fc10.js";import{_ as R}from"./_plugin-vue_export-helper.c27b6911.js";import"./Times.4935bce4.js";const r=d=>(L("data-v-ee80be40"),d=d(),Q(),d),W={class:"box-fixed"},X={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},Y={class:"w-full flex flex-col items-center grow overflow-auto"},Z={class:"w-full flex flex-row flex-wrap"},ee={class:"w-full sm:w-6/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},te=r(()=>e("label",{for:""},"Name",-1)),se={class:"text-red-500"},le={class:"w-full sm:w-6/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},oe=r(()=>e("label",{for:""},"Value",-1)),ae={class:"text-red-500"},ne={class:"w-full sm:w-6/12 md:w-full lg:w-full flex flex-col flex-wrap p-1"},ie=r(()=>e("label",{for:""},"Note",-1)),de=["disabled"],ue={class:"text-red-500"},re={class:"w-full flex flex-col flex-wrap p-1"},ce=r(()=>e("label",{for:""},"Unit",-1)),_e={class:"card-border flex flex-row flex-wrap"},pe={key:0,class:"w-full flex"},fe=r(()=>e("div",{class:"flex items-center grow p-1"}," Pilih Unit ",-1)),me={key:1,class:"w-full flex",style:{}},ve={class:"flex flex-row flex-wrap grow"},xe={class:"p-1"},we=r(()=>e("div",{class:"text-sm text-gray-600"},"ID",-1)),he={class:"bold"},be={class:"p-1"},ye=r(()=>e("div",{class:"text-sm text-gray-600"},"Name",-1)),ge={class:"bold"},Se={class:"text-red-500"},ke={class:"w-full flex items-center justify-end"},Ce={__name:"item",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]}},setup(d){const n=d;let S={id:"",name:""};const k={id:-1,name:"",value:"",note:"",unit:{...S}},t=h({...k}),C=T("token"),u=h({}),f=h(!1),F=()=>{t.value.unit={...S}},A=()=>{f.value=!0},B=()=>{f.value=!1},D=o=>{t.value.unit=o,f.value=!1},V=async()=>{v().loading_full=!0,u.value={};const o=new FormData;o.append("name",t.value.name),o.append("value",t.value.value),o.append("note",t.value.note),o.append("unit_id",t.value.unit.id);let s="post",c=n.id;c==0||(o.append("id",c),o.append("_method","PUT"));const{data:i,error:x,status:w}=await N("/api/item",{method:s,headers:{Authorization:`Bearer ${C.value}`,Accept:"application/json"},body:o,retry:0});if(v().loading_full=!1,w.value==="error"){$().trigger(x,u);return}if(t.value.updated_user=i.value.updated_user,t.value.updated_by=i.value.updated_by,t.value.updated_at=i.value.updated_at,n.id<=0)t.value.created_user=i.value.created_user,t.value.created_by=i.value.created_by,t.value.created_at=i.value.created_at,t.value.id=i.value.id,n.p_data.unshift(t.value);else{let m=n.p_data.map(a=>a.id).indexOf(n.id);m>=-1&&n.p_data.splice(m,1,{...t.value})}n.fnClose()},j=async()=>{v().loading_full=!0;const{data:o,error:s,status:c}=await N("/api/item",{method:"get",headers:{Authorization:`Bearer ${C.value}`,Accept:"application/json"},params:{id:n.id},retry:0});if(v().loading_full=!1,c.value==="error"){$().trigger(s);return}t.value=o.value.data},I=H(()=>!1);return J(()=>n.show,(o,s)=>{o==!0&&(t.value={...k},u.value={},n.id!=0&&j())},{immediate:!0}),(o,s)=>{const c=q,i=P,x=M,w=z,m=E;return b(),y(K,null,[g(e("section",W,[e("div",null,[p(c,{title:"Form Item",fn:d.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",X,[e("div",Y,[e("div",Z,[e("div",ee,[te,g(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=a=>l(t).name=a)},null,512),[[U,l(t).name]]),e("p",se,_(l(u).name),1)]),e("div",le,[oe,e("div",null,[p(i,{class:"w-full h-full p-1",type:"text",value:l(t).value||0,onInput:s[1]||(s[1]=a=>l(t).value=a),disabled:l(I)},null,8,["value","disabled"])]),e("p",ae,_(l(u).value),1)]),e("div",ne,[ie,e("div",null,[g(e("textarea",{"onUpdate:modelValue":s[2]||(s[2]=a=>l(t).note=a),disabled:l(I)},null,8,de),[[U,l(t).note]])]),e("p",ue,_(l(u).note),1)]),e("div",re,[ce,e("div",_e,[!l(t).unit||!l(t).unit.id?(b(),y("div",pe,[e("button",{type:"button",onClick:s[3]||(s[3]=a=>A()),class:"flex items-center grow"},[p(x,{class:"text-2xl text-black"}),fe])])):(b(),y("div",me,[e("div",ve,[e("div",xe,[we,e("div",he,_(l(t).unit.id),1)]),e("div",be,[ye,e("div",ge,_(l(t).unit.name),1)])]),e("button",{type:"button",class:"w-10 bg-red-600 flex items-center justify-center",onClick:s[4]||(s[4]=a=>F())},[p(w,{class:"text-2xl text-white"})])]))]),e("p",Se,_(l(u).unit_id),1)])])]),e("div",ke,[e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:s[5]||(s[5]=a=>d.fnClose())}," Cancel "),e("button",{type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:s[6]||(s[6]=G(a=>V(),["prevent"]))}," Save ")])])])],512),[[O,d.show]]),p(m,{show:l(f),fnClose:B,fnSelect:D,excludes:"item_had_which_item_id"},null,8,["show"])],64)}}},qe=R(Ce,[["__scopeId","data-v-ee80be40"]]);export{qe as default};
