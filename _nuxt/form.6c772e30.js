import{_ as M}from"./InputPointFormat.vue.585e0632.js";import{_ as T}from"./Search.c6944c0d.js";import{_ as z}from"./Delete.fe98d890.js";import{_ as q}from"./units.61a9acd0.js";import{n as H,u as L,q as Q,r as _,s as Z,v as G,x as J,y as K,C as h,D as U,o as g,c as y,a as e,B as l,z as x,M as $,t as u,A,b as w,N as O,I as W,E as X}from"./entry.6adb1d9c.js";import{u as D}from"./useMyFetch.f71c811d.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./HeaderPopup.vue.d86417f2.js";import"./Times.ba69d818.js";import"./useUtils.100f5b4a.js";const Y={class:"w-full h-full flex flex-col border-t-4 border-slate-600"},ee={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},te={class:"w-full align-items-center justify-content-center grow overflow-auto"},oe={class:"w-full flex flex-col flex-wrap p-1"},se=e("label",{for:""},"Foto",-1),le={class:"flex justify-center items-center w-24 h-24"},ae=["src"],ne=e("small",null,"Upload file image : jpg, jpeg",-1),ie={class:"help-err"},re={class:"w-full flex flex-col flex-wrap p-1"},ue=e("label",{for:""},"Name",-1),ce={class:"text-red-500"},de={class:"w-full flex flex-col flex-wrap p-1"},pe=e("label",{for:""},"Value",-1),fe={class:"text-red-500"},_e={class:"w-full flex flex-col flex-wrap p-1"},me=e("label",{for:""},"Note",-1),ve={class:"text-red-500"},he={class:"w-full flex flex-col flex-wrap p-1"},xe=e("label",{for:""},"Unit",-1),we={class:"card-border flex flex-row flex-wrap"},ge={key:0,class:"w-full flex"},ye=e("div",{class:"flex items-center grow p-1"}," Pilih Unit ",-1),be={key:1,class:"w-full flex",style:{}},Se={class:"flex flex-row flex-wrap grow"},ke={class:"p-1"},Ce=e("div",{class:"text-sm text-gray-600"},"ID",-1),Ue={class:"bold"},$e={class:"p-1"},Ae=e("div",{class:"text-sm text-gray-600"},"Email",-1),De={class:"bold"},je={class:"text-red-500"},Ie={class:"w-full flex items-center justify-end"},qe=H({__name:"form",props:{id:{type:Number,required:!1}},async setup(j){let m,b;const S=j;L();const k=Q("token"),i=_({});Z(),G();let C={id:"",name:""};const p=_(!1),{data:I}=([m,b]=J(async()=>K(async()=>{const o=S.id;if(o!==void 0&&o!==""){h().loading_full=!0;const{data:t,error:n,status:c}=await D("/api/item",{method:"get",headers:{Authorization:`Bearer ${k.value}`,Accept:"application/json"},params:{id:o},retry:0});if(h().loading_full=!1,c.value==="error")U().trigger(n,i);else{let r=t.value.data;return t.value.data.photo&&(p.value=!0),r}}return{id:-1,name:"",value:0,note:"",unit:{...C},photo:""}},"$H5QeZpUITn")),m=await m,b(),m),s=_(null);s.value=I.value;let v=_(!1);const N=()=>{s.value.unit={...C}},B=()=>{v.value=!0},F=()=>{v.value=!1},P=o=>{s.value.unit=o,v.value=!1},R=async()=>{var a;h().loading_full=!0,i.value={};const o=new FormData;o.append("name",s.value.name),o.append("value",s.value.value),o.append("note",s.value.note),o.append("unit_id",s.value.unit.id),(a=f.value)!=null&&a.files&&o.append("photo",f.value.files[0]||""),f.value&&o.append("photo_preview",s.value.photo);let t="post",n=S.id;n==null||(t="post",o.append("id",n),o.append("_method","PUT"));const{data:c,error:r,status:d}=await D("/api/item",{method:t,headers:{Authorization:`Bearer ${k.value}`,Accept:"application/json"},body:o,retry:0});if(h().loading_full=!1,d.value==="error"){U().trigger(r,i);return}X().display({show:!0,status:"Success",message:"Data Tersimpan"})},f=_(null),V=o=>{var t=o.target.files;if(t.length>0){let n=new FileReader;n.onload=function(c){var d;let r=(d=c.target)==null?void 0:d.result;r.match(/image/)&&(s.value.photo=r)},n.readAsDataURL(t[0]),p.value=!0}},E=()=>{p.value=!1,s.value.photo="";let o=f.value;o&&(o.value="")};return(o,t)=>{const n=M,c=T,r=z,d=q;return g(),y(W,null,[e("div",Y,[e("form",ee,[e("div",te,[e("div",oe,[se,e("div",le,[e("img",{src:l(s).photo||"/stok/user-default.png",alt:"",class:"max-w-full max-h-full"},null,8,ae)]),x(e("button",{type:"button",class:"bg-gray-600 w-24 text-white",onClick:t[0]||(t[0]=a=>E())},"Remove",512),[[$,l(p)]]),x(e("input",{onChange:t[1]||(t[1]=a=>V(a)),ref_key:"photo_input",ref:f,type:"file",name:"photo",value:""},null,544),[[$,!l(p)]]),ne,e("p",ie,u(l(i).photo),1)]),e("div",re,[ue,x(e("input",{class:"",type:"text","onUpdate:modelValue":t[2]||(t[2]=a=>l(s).name=a)},null,512),[[A,l(s).name]]),e("p",ce,u(l(i).name),1)]),e("div",de,[pe,w(n,{class:"",type:"text",value:l(s).value,onInput:t[3]||(t[3]=a=>l(s).value=a)},null,8,["value"]),e("p",fe,u(l(i).value),1)]),e("div",_e,[me,x(e("textarea",{class:"","onUpdate:modelValue":t[4]||(t[4]=a=>l(s).note=a)},null,512),[[A,l(s).note]]),e("p",ve,u(l(i).note),1)]),e("div",he,[xe,e("div",we,[!l(s).unit||!l(s).unit.id?(g(),y("div",ge,[e("button",{type:"button",onClick:t[5]||(t[5]=a=>B()),class:"flex items-center grow"},[w(c,{class:"text-2xl text-black"}),ye])])):(g(),y("div",be,[e("div",Se,[e("div",ke,[Ce,e("div",Ue,u(l(s).unit.id),1)]),e("div",$e,[Ae,e("div",De,u(l(s).unit.name),1)])]),e("button",{type:"button",class:"w-10 bg-red-600 flex items-center justify-center",onClick:t[6]||(t[6]=a=>N())},[w(r,{class:"text-2xl text-white"})])]))]),e("p",je,u(l(i).unit_id),1)])]),e("div",Ie,[e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:t[7]||(t[7]=a=>o.$router.go(-1))}," Cancel "),e("button",{type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:t[8]||(t[8]=O(a=>R(),["prevent"]))}," Save ")])])]),w(d,{show:l(v),fnClose:F,fnSelect:P,excludes:"item_had_which_item_id"},null,8,["show"])],64)}}});export{qe as default};
