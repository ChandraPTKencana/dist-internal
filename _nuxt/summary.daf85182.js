import{_ as H}from"./client-only.11ba3148.js";import{_ as Q}from"./Search.49c011f1.js";import{_ as G}from"./summary_detail.5a70a516.js";import{q as J,r as i,Q as T,P as K,o as n,c as r,a as t,b as h,w as L,B as a,t as d,N as P,z as Z,A as W,G as X,I as _,J as x,K as V,C as z,D as Y,p as ee,e as te}from"./entry.9a14ada7.js";import{u as se}from"./useMyFetch.398e73d1.js";import{_ as oe}from"./_plugin-vue_export-helper.c27b6911.js";import"./HeaderPopup.vue.3ebd5eb2.js";import"./Times.45255da7.js";import"./useUtils.100f5b4a.js";const B=m=>(ee("data-v-ff204c44"),m=m(),te(),m),le={class:"w-full h-full flex flex-col border-t-4 border-slate-600"},ae={action:"#",class:"w-full flex p-1"},ne={class:"w-full flex flex-row flex-wrap p-1 items-center"},re=B(()=>t("label",{for:"",class:"pr-1"},"To",-1)),ie={class:"grow"},ce={class:"text-red-500"},ue={class:"flex items-end p-1"},de={class:"w-full flex"},_e={class:"p-1"},me={class:"grow flex flex-row flex-wrap"},pe={class:"p-1"},fe=["onClick"],ve={class:"w-full flex justify-center items-center grow h-0 p-1"},he={key:0,class:""},xe={key:1,class:"w-full h-full overflow-auto",role:"sticky",ref:"loadRef"},we={class:"tacky"},ye={class:"sticky top-0 !z-[2]"},ke=B(()=>t("th",null,null,-1)),ge=["onClick"],be={class:"font-bold !text-left"},Ce=["onClick"],De={__name:"summary",setup(m){const $=J("token"),w=i({from:"",to:new Date}),A=i({}),c=i([]),y=i([]),D=i([]),S=i(-1),k=i(!1),I=i({}),p={};p._TimeZoneOffset=new Date().getTimezoneOffset();const M=async()=>{z().loading_full=!0,p.page=1,p.to=w.value.to,c.value=[];const{data:s,error:e,status:o}=await se("/api/summary_transactions",{method:"get",headers:{Authorization:`Bearer ${$.value}`,Accept:"application/json"},params:p,retry:0});if(z().loading_full=!1,o.value==="error"){Y().trigger(e);return}c.value=s.value.all,y.value=s.value.column_header,D.value=s.value.row_header},E=(s,e)=>{let o=c.value.filter(l=>l.id==s)[0];const{items:R,...g}=o;let b=o.items.filter(l=>l.id==e)[0];return{rest:g,item:b}},N=(s,e)=>c.value.filter(o=>o.id==s)[0].items.filter(o=>o.id==e)[0].qty_reminder,U=(s,e,o)=>{I.value=s,k.value=!0},f=i(""),u=i([]),j=s=>{let e=u.value.map(o=>o.id).indexOf(s.id);e==-1?u.value.push(s):u.value.splice(e,1)},q=s=>u.value.some(e=>e.id===s.id),O=T(()=>{let s=[],e=u.value.map(o=>o.id);return y.value.forEach(o=>{e.indexOf(o.id)==-1&&s.push(o)}),s}),F=T(()=>{let s=f.value;const e=new RegExp("("+s+")","i");return D.value.filter(o=>o.name.match(e))});return M(),(s,e)=>{const o=K("vue-date-picker"),R=H,g=Q,b=G;return n(),r(_,null,[t("div",le,[t("form",ae,[t("div",ne,[re,t("div",ie,[h(R,null,{default:L(()=>[h(o,{modelValue:a(w).to,"onUpdate:modelValue":e[0]||(e[0]=l=>a(w).to=l),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,"text-input":"","teleport-center":""},null,8,["modelValue"])]),_:1})]),t("p",ce,d(a(A).to),1)]),t("div",ue,[t("button",{style:{width:"38px",height:"38px"},type:"submit",name:"button",onClick:e[1]||(e[1]=P(l=>M(),["prevent"]))},[h(g,{class:"text-2xl"})])])]),t("div",de,[t("div",_e,[Z(t("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=l=>X(f)?f.value=l:null),placeholder:"Item Name"},null,512),[[W,a(f)]])]),t("div",me,[(n(!0),r(_,null,x(a(y),l=>(n(),r("div",pe,[t("div",{class:V(["p-1 rounded ring-1 ring-slate-500 cursor-pointer",q(l)?"bg-white text-black":"bg-slate-600 text-white"]),onClick:v=>j(l)},d(l.lokasi),11,fe)]))),256))])]),t("div",ve,[a(c).length==0?(n(),r("div",he," Maaf Tidak Ada Record ")):(n(),r("div",xe,[t("table",we,[t("thead",null,[t("tr",ye,[ke,(n(!0),r(_,null,x(a(O),l=>(n(),r("th",null,d(l.lokasi),1))),256))])]),t("tbody",null,[(n(!0),r(_,null,x(a(F),(l,v)=>(n(),r("tr",{key:v,onClick:C=>S.value=v,class:V(a(S)==v?"active":"")},[t("th",be,d(l.name),1),(n(!0),r(_,null,x(a(O),C=>(n(),r("td",null,[t("a",{class:"text-blue-500 font-bold underline cursor-pointer",onClick:Se=>U(E(C.id,l.id))},d(N(C.id,l.id)),9,Ce)]))),256))],10,ge))),128))])])],512))])]),h(b,{show:a(k),data:a(I),fnClose:()=>{k.value=!1}},null,8,["show","data","fnClose"])],64)}}},Ae=oe(De,[["__scopeId","data-v-ff204c44"]]);export{Ae as default};
