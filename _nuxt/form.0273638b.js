import{_ as ne}from"./HeaderCustom.vue.2274acf9.js";import{_ as re}from"./client-only.a4512e42.js";import{_ as z}from"./Search.cd740c5d.js";import{_ as ie}from"./Delete.797ef27c.js";import{_ as Y}from"./HeaderPopup.vue.2983f6f3.js";import{q as E,r as m,g as J,z as y,M as Z,o as p,c as v,a as e,b as w,G,A as I,B as l,H as B,N as ce,I as K,J as Q,K as W,t as i,L as X,p as ee,e as te,C as O,D as F,n as de,u as ue,s as _e,v as fe,x as me,y as pe,O as ve,w as he}from"./entry.a58c45cf.js";import{u as le}from"./useUtils.100f5b4a.js";import{u as R}from"./useMyFetch.bcdb1556.js";import{_ as se}from"./_plugin-vue_export-helper.c27b6911.js";import"./Times.bc001055.js";const M=_=>(ee("data-v-d6afa38a"),_=_(),te(),_),xe={class:"box-fixed"},we={action:"#",class:"w-full flex p-1"},be={class:"grow"},ye=M(()=>e("div",{class:"font-bold"}," Keyword ",-1)),ge={class:"pl-1"},$e=M(()=>e("div",{class:"font-bold"}," Sort By ",-1)),ke=M(()=>e("option",{value:"created_at"},"Created At",-1)),Se=M(()=>e("option",{value:"email"},"Email",-1)),Ce=M(()=>e("option",{value:"fullname"},"Fullname",-1)),Me=[ke,Se,Ce],Ae={class:"pl-1"},De=M(()=>e("div",{class:"font-bold"}," Sort Order ",-1)),Oe=M(()=>e("option",{value:"asc"},"Asc",-1)),Ue=M(()=>e("option",{value:"desc"},"Desc",-1)),Ve=[Oe,Ue],He={class:"flex items-end pl-1"},Ie={class:"w-full flex justify-center items-center grow h-0 p-1"},Ne={key:0,class:""},Te={class:"tacky"},je=M(()=>e("thead",null,[e("tr",{class:"sticky top-0 !z-[2]"},[e("th",null,"No."),e("th",null,"Email"),e("th",null,"Fullname"),e("th",null,"Role"),e("th",null,"Tanggal Dibuat"),e("th",null,"Tanggal Diubah")])],-1)),Le=["onClick"],qe={class:"bold"},Be={class:"flex",style:{"justify-content":"end",padding:"5px"}},Fe={__name:"users",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},excludes:{type:String,required:!1},exclude_lists:{type:Array,required:!1}},setup(_){const b=_,{$moment:A}=X(),{countClickListFn:H}=le(),h=E("token"),c=m([]),u=m(""),d=m({field:"created_at",by:"desc"}),x=m(-1),t=m({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),n={};n._TimeZoneOffset=new Date().getTimezoneOffset();const N=()=>{n.like="",u.value!=""&&(n.like=`email:%${u.value}%,fullname:%${u.value}%`),n.sort="",d.value.field&&(n.sort=d.value.field+":"+d.value.by)},g=m(null),U=async()=>{O().loading_full=!0,t.value.may_get_data=!1,n.page=t.value.page,n.page==1&&(c.value=[]),n.first_row&&delete n.first_row,n.page>1&&(n.first_row=JSON.stringify(c.value[0]));const{data:r,error:a,status:S}=await R("/api/users",{method:"get",headers:{Authorization:`Bearer ${h.value}`,Accept:"application/json"},params:n,retry:0});if(O().loading_full=!1,t.value.may_get_data=!0,S.value==="error"){F().trigger(a);return}t.value.page==1?(c.value=r.value.data,g.value&&(g.value.scrollTop=0)):t.value.page>1&&(c.value=[...c.value,...r.value.data]),r.value.data.length==0&&(t.value.is_last_record=!0)},T=async()=>{if(!t.value.may_get_data)return;let r=g.value;if(r.scrollLeft!=t.value.scrollLeft){t.value.scrollLeft=r.scrollLeft;return}t.value.is_last_record||!(Math.round(r.scrollTop)+r.clientHeight>=r.scrollHeight-1)||(t.value.page++,await U())},$=()=>{t.value.page=1,t.value.is_last_record=!1,N(),U()},V=()=>{x.value>-1?b.fnSelect(c.value[x.value]):b.fnSelect({id:"",email:"",fullname:""})};return J(()=>b.show,(r,a)=>{r==!0&&$()},{immediate:!0}),(r,a)=>{const S=Y,j=z;return y((p(),v("section",xe,[e("div",null,[w(S,{title:"Search And Select Employees",fn:_.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",we,[e("div",be,[ye,y(e("input",{class:"",type:"text","onUpdate:modelValue":a[0]||(a[0]=s=>G(u)?u.value=s:null),name:"search",placeholder:"Keyword"},null,512),[[I,l(u)]])]),e("div",ge,[$e,y(e("select",{class:"","onUpdate:modelValue":a[1]||(a[1]=s=>l(d).field=s)},Me,512),[[B,l(d).field]])]),e("div",Ae,[De,y(e("select",{class:"","onUpdate:modelValue":a[2]||(a[2]=s=>l(d).by=s)},Ve,512),[[B,l(d).by]])]),e("div",He,[e("button",{class:"",type:"submit",name:"button",onClick:a[3]||(a[3]=ce(s=>$(),["prevent"]))},[w(j,{class:"text-2xl"})])])]),e("div",Ie,[l(c).length==0?(p(),v("div",Ne," Maaf Tidak Ada Record ")):(p(),v("div",{key:1,class:"w-full h-full overflow-auto",role:"sticky",ref_key:"loadRef",ref:g,onScroll:T},[e("table",Te,[je,e("tbody",null,[(p(!0),v(K,null,Q(l(c),(s,o)=>(p(),v("tr",{key:o,onClick:D=>l(H)(o,()=>{x.value=o},V),class:W(l(x)==o?"active":"")},[e("td",null,i(o+1)+".",1),e("td",qe,i(s.email),1),e("td",null,i(s.fullname),1),e("td",null,i(s.role),1),e("td",null,i(l(A)(s.created_at).format("DD-MM-Y HH:mm:ss")),1),e("td",null,i(l(A)(s.updated_at).format("DD-MM-Y HH:mm:ss")),1)],10,Le))),128))])])],544))]),e("div",Be,[e("button",{onClick:a[4]||(a[4]=s=>V()),class:"w-36 m-1 bg-blue-600 text-white rounded-sm"}," Select ")])])],512)),[[Z,_.show]])}}},Re=se(Fe,[["__scopeId","data-v-d6afa38a"]]);const k=_=>(ee("data-v-c35ab607"),_=_(),te(),_),ze={class:"box-fixed"},Ee={class:"w-full flex p-1"},Ke={class:"grow"},Pe=k(()=>e("div",{class:"font-bold"}," Keyword ",-1)),Ye={class:"pl-1"},Je=k(()=>e("div",{class:"font-bold"}," Sort By ",-1)),Ze=k(()=>e("option",{value:"created_at"},"Created At",-1)),Ge=k(()=>e("option",{value:"username"},"Username",-1)),Qe=k(()=>e("option",{value:"email"},"Email",-1)),We=k(()=>e("option",{value:"fullname"},"Fullname",-1)),Xe=[Ze,Ge,Qe,We],et={class:"pl-1"},tt=k(()=>e("div",{class:"font-bold"}," Sort Order ",-1)),lt=k(()=>e("option",{value:"asc"},"Asc",-1)),st=k(()=>e("option",{value:"desc"},"Desc",-1)),ot=[lt,st],at={class:"flex items-end pl-1"},nt={class:"w-full flex justify-center items-center grow h-0 p-1"},rt={key:0,class:""},it={class:"tacky"},ct=k(()=>e("thead",null,[e("tr",{class:"sticky top-0 !z-[2]"},[e("th",null,"No."),e("th",null,"Username"),e("th",null,"Email"),e("th",null,"Fullname"),e("th",null,"Tanggal Dibuat"),e("th",null,"Tanggal Diubah")])],-1)),dt=["onClick"],ut={class:"bold"},_t={class:"flex",style:{"justify-content":"end",padding:"5px"}},ft={__name:"members",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},excludes:{type:String,required:!1},exclude_lists:{type:Array,required:!1}},setup(_){const b=_,{$moment:A}=X(),{countClickListFn:H}=le(),h=E("token"),c=m([]),u=m(""),d=m({field:"created_at",by:"desc"}),x=m(-1),t=m({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),n={};n._TimeZoneOffset=new Date().getTimezoneOffset();const N=()=>{n.like="",u.value!=""&&(n.like=`username:%${u.value}%,email:%${u.value}%,fullname:%${u.value}%`),n.sort="",d.value.field&&(n.sort=d.value.field+":"+d.value.by)},g=m(null),U=async()=>{O().loading_full=!0,t.value.may_get_data=!1,n.page=t.value.page,n.page==1&&(c.value=[]),n.first_row&&delete n.first_row,n.page>1&&(n.first_row=JSON.stringify(c.value[0]));const{data:r,error:a,status:S}=await R("/api/members",{method:"get",headers:{Authorization:`Bearer ${h.value}`,Accept:"application/json"},params:n,retry:0});if(O().loading_full=!1,t.value.may_get_data=!0,S.value==="error"){F().trigger(a);return}t.value.page==1?(c.value=r.value.data,g.value&&(g.value.scrollTop=0)):t.value.page>1&&(c.value=[...c.value,...r.value.data]),r.value.data.length==0&&(t.value.is_last_record=!0)},T=async()=>{if(!t.value.may_get_data)return;let r=g.value;if(r.scrollLeft!=t.value.scrollLeft){t.value.scrollLeft=r.scrollLeft;return}t.value.is_last_record||!(Math.round(r.scrollTop)+r.clientHeight>=r.scrollHeight-1)||(t.value.page++,await U())},$=()=>{t.value.page=1,t.value.is_last_record=!1,N(),U()},V=()=>{x.value>-1?b.fnSelect(c.value[x.value]):b.fnSelect({id:"",username:"",email:"",fullname:""})};return J(()=>b.show,(r,a)=>{r==!0&&$()},{immediate:!0}),(r,a)=>{const S=Y,j=z;return y((p(),v("section",ze,[e("div",null,[w(S,{title:"Search And Select Members",fn:_.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("div",Ee,[e("div",Ke,[Pe,y(e("input",{class:"",type:"text","onUpdate:modelValue":a[0]||(a[0]=s=>G(u)?u.value=s:null),name:"search",placeholder:"Keyword"},null,512),[[I,l(u)]])]),e("div",Ye,[Je,y(e("select",{class:"","onUpdate:modelValue":a[1]||(a[1]=s=>l(d).field=s)},Xe,512),[[B,l(d).field]])]),e("div",et,[tt,y(e("select",{class:"","onUpdate:modelValue":a[2]||(a[2]=s=>l(d).by=s)},ot,512),[[B,l(d).by]])]),e("div",at,[e("button",{class:"",type:"button",name:"button",onClick:a[3]||(a[3]=s=>$())},[w(j,{class:"text-2xl"})])])]),e("div",nt,[l(c).length==0?(p(),v("div",rt," Maaf Tidak Ada Record ")):(p(),v("div",{key:1,class:"w-full h-full overflow-auto",role:"sticky",ref_key:"loadRef",ref:g,onScroll:T},[e("table",it,[ct,e("tbody",null,[(p(!0),v(K,null,Q(l(c),(s,o)=>(p(),v("tr",{key:o,onClick:D=>l(H)(o,()=>{x.value=o},V),class:W(l(x)==o?"active":"")},[e("td",null,i(o+1)+".",1),e("td",ut,i(s.username),1),e("td",null,i(s.email),1),e("td",null,i(s.fullname),1),e("td",null,i(l(A)(s.internal_created_at).format("DD-MM-Y HH:mm:ss")),1),e("td",null,i(l(A)(s.internal_updated_at).format("DD-MM-Y HH:mm:ss")),1)],10,dt))),128))])])],544))]),e("div",_t,[e("button",{onClick:a[4]||(a[4]=s=>V()),class:"w-36 m-1 bg-blue-600 text-white rounded-sm"}," Select ")])])],512)),[[Z,_.show]])}}},mt=se(ft,[["__scopeId","data-v-c35ab607"]]),pt={class:"w-full h-full flex flex-col"},vt={class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},ht={class:"w-full align-items-center justify-content-center grow overflow-auto"},xt={class:"w-full flex flex-col flex-wrap p-1"},wt=e("label",{for:""},"Name",-1),bt={class:"text-red-500"},yt={class:"w-full flex flex-col flex-wrap p-1"},gt=e("label",{for:""},"Address",-1),$t={class:"text-red-500"},kt={class:"w-full flex flex-col flex-wrap p-1"},St=e("label",{for:""},"Contact Number",-1),Ct={class:"text-red-500"},Mt={class:"w-full flex flex-col flex-wrap p-1"},At=e("label",{for:""},"Contact Person",-1),Dt={class:"text-red-500"},Ot={class:"w-full flex flex-col flex-wrap p-1"},Ut=e("label",{for:""},"Active Until",-1),Vt={class:"text-red-500"},Ht={class:"w-full flex flex-col flex-wrap p-1"},It=e("label",{for:""},"Marketer",-1),Nt={class:"w-full flex flex-row flex-wrap border-black border-solid border-2"},Tt={key:0,class:"w-full flex"},jt=e("div",{class:"flex items-center grow p-1"}," Pilih Karyawan ",-1),Lt={key:1,class:"w-full flex",style:{}},qt={class:"flex flex-row flex-wrap grow"},Bt={class:"p-1"},Ft=e("div",{class:"text-sm text-gray-600"},"ID",-1),Rt={class:"bold"},zt={class:"p-1"},Et=e("div",{class:"text-sm text-gray-600"},"Email",-1),Kt={class:"bold"},Pt={class:"text-red-500"},Yt={class:"w-full flex flex-col flex-wrap p-1"},Jt=e("label",{for:""},"Operator",-1),Zt={class:"w-full flex flex-row flex-wrap border-black border-solid border-2"},Gt={key:0,class:"w-full flex"},Qt=e("div",{class:"flex items-center grow p-1"}," Pilih Member ",-1),Wt={key:1,class:"w-full flex",style:{}},Xt={class:"flex flex-row flex-wrap grow"},el={class:"p-1"},tl=e("div",{class:"text-sm text-gray-600"},"ID",-1),ll={class:"bold"},sl={class:"p-1"},ol=e("div",{class:"text-sm text-gray-600"},"Username",-1),al={class:"bold"},nl={class:"text-red-500"},rl={class:"w-full flex items-center justify-end"},xl=de({__name:"form",async setup(_){let b,A;ue();const H=E("token"),h=m({}),c=_e(),u=fe();let d={id:"",email:"",fullname:""},x={id:"",username:"",email:"",fullname:""};const{data:t}=([b,A]=me(async()=>pe(async()=>{const s=u.query.id;if(s!==void 0&&s!==""){O().loading_full=!0;const{data:o,error:D,status:L}=await R("/api/institute",{method:"get",headers:{Authorization:`Bearer ${H.value}`,Accept:"application/json"},params:{id:s},retry:0});if(O().loading_full=!1,L.value==="error")F().trigger(D,h);else{let C=o.value.data;return C.members.length>0?C.operator_member=C.members[0]:C.operator_member={...x},C}}return{id:-1,email:"",fullname:"",password:"",role:"Institute",can_login:"0",internal_marketer:{...d},operator_member:{...x}}},"$B1N4oerOMC")),b=await b,A(),b);let n=m(!1);const N=()=>{t.value.internal_marketer={...d}},g=()=>{n.value=!0},U=()=>{n.value=!1},T=s=>{t.value.internal_marketer=s,n.value=!1};let $=m(!1);const V=()=>{t.value.operator_member={...x}},r=()=>{$.value=!0},a=()=>{$.value=!1},S=s=>{t.value.operator_member=s,$.value=!1},j=async()=>{O().loading_full=!0,h.value={};let s={name:t.value.name,address:t.value.address,contact_number:t.value.contact_number,contact_person:t.value.contact_person,internal_marketer_id:t.value.internal_marketer.id,operator_member_id:t.value.operator_member.id},o="post",D=u.query.id;D===""||(o="put",s.id=D);const{data:L,error:C,status:q}=await R("/api/institute",{method:o,headers:{Authorization:`Bearer ${H.value}`,Accept:"application/json"},body:s,retry:0});if(O().loading_full=!1,q.value==="error"){F().trigger(C,h);return}c.go(-1)};return(s,o)=>{const D=ne,L=ve("vue-date-picker"),C=re,q=z,P=ie,oe=Re,ae=mt;return p(),v(K,null,[e("div",pt,[w(D,{title:"Form Institute",back:!0}),e("div",vt,[e("div",ht,[e("div",xt,[wt,y(e("input",{class:"",type:"text","onUpdate:modelValue":o[0]||(o[0]=f=>l(t).name=f)},null,512),[[I,l(t).name]]),e("p",bt,i(l(h).name),1)]),e("div",yt,[gt,y(e("textarea",{class:"","onUpdate:modelValue":o[1]||(o[1]=f=>l(t).address=f)},null,512),[[I,l(t).address]]),e("p",$t,i(l(h).address),1)]),e("div",kt,[St,y(e("input",{class:"",type:"text","onUpdate:modelValue":o[2]||(o[2]=f=>l(t).contact_number=f)},null,512),[[I,l(t).contact_number]]),e("p",Ct,i(l(h).contact_number),1)]),e("div",Mt,[At,y(e("input",{class:"",type:"text","onUpdate:modelValue":o[3]||(o[3]=f=>l(t).contact_person=f)},null,512),[[I,l(t).contact_person]]),e("p",Dt,i(l(h).contact_person),1)]),e("div",Ot,[Ut,w(C,null,{default:he(()=>[w(L,{class:"border-black border-solid border-2",modelValue:l(t).active_until,"onUpdate:modelValue":o[4]||(o[4]=f=>l(t).active_until=f),"text-input":"","teleport-center":""},null,8,["modelValue"])]),_:1}),e("p",Vt,i(l(h).active_until),1)]),e("div",Ht,[It,e("div",Nt,[!l(t).internal_marketer||!l(t).internal_marketer.id?(p(),v("div",Tt,[e("button",{onClick:o[5]||(o[5]=f=>g()),class:"flex items-center grow"},[w(q,{class:"text-2xl text-black"}),jt])])):(p(),v("div",Lt,[e("div",qt,[e("div",Bt,[Ft,e("div",Rt,i(l(t).internal_marketer.id),1)]),e("div",zt,[Et,e("div",Kt,i(l(t).internal_marketer.email),1)])]),e("button",{class:"w-10 bg-red-600 flex items-center justify-center",onClick:o[6]||(o[6]=f=>N())},[w(P,{class:"text-2xl text-white"})])]))]),e("p",Pt,i(l(h).internal_marketer_id),1)]),e("div",Yt,[Jt,e("div",Zt,[!l(t).operator_member||l(t).operator_member.id==""?(p(),v("div",Gt,[e("button",{onClick:o[7]||(o[7]=f=>r()),class:"flex items-center grow"},[w(q,{class:"text-2xl text-black"}),Qt])])):(p(),v("div",Wt,[e("div",Xt,[e("div",el,[tl,e("div",ll,i(l(t).operator_member.id),1)]),e("div",sl,[ol,e("div",al,i(l(t).operator_member.username),1)])]),e("button",{class:"w-10 bg-red-600 flex items-center justify-center",onClick:o[8]||(o[8]=f=>V())},[w(P,{class:"text-2xl text-white"})])]))]),e("p",nl,i(l(h).operator_member_id),1)])]),e("div",rl,[e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:o[9]||(o[9]=f=>s.$router.go(-1))}," Cancel "),e("button",{type:"button",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:o[10]||(o[10]=f=>j())}," Save ")])])]),w(oe,{show:l(n),fnClose:U,fnSelect:T,excludes:"institute_had_which_institute_id"},null,8,["show"]),w(ae,{show:l($),fnClose:a,fnSelect:S},null,8,["show"])],64)}}});export{xl as default};
